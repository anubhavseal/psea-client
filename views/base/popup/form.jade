form.form-horizontal(name='popupForm' enctype='multipart/form-data')
	.form-group(ng-repeat='control in template.fields' ng-class="{ 'has-error': popupForm.{{control.id}}.$invalid }" )
		label.col-sm-4.control-label(style='white-space:ellipsis' data-ng-class='{"bold" : control.mandatory}')
			| {{control.caption}}
			sup.mandatory(data-ng-show='control.mandatory') *
		.col-sm-7(data-ng-switch='' on='control.controlType')
			.fileUpload(data-ng-switch-when='file')
				input.form-control(name='{{control.id}}' id='{{control.id}}' type='file' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden' ngf-select='uploadFiles($files, control)')
				a(data-ng-show='control.selectedOption != null && control.selectedOption != ""' href="{{control.uploadedFile || control.selectedOption}}" download) View {{control.caption}}
			input.form-control(name='{{control.id}}' id='{{control.id}}' type='password' data-ng-switch-when='password' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			input.form-control(name='{{control.id}}' id='{{control.id}}' type='text' data-ng-switch-when='text' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			input.form-control(name='{{control.id}}' id='{{control.id}}' type='number' data-ng-switch-when='number' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' min='{{control.minValue}}' max='{{control.maxValue}}' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-change='handleActionClick(control, "onchange")' data-ng-hide='control.hidden')
			input.form-control(name='{{control.id}}' id='{{control.id}}' type='email' data-ng-switch-when='email' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			.dateCont(data-ng-switch-when='date' ng-controller='base.datepicker.controller')
				input.form-control(name='{{control.id}}' id='{{control.id}}' type='date' placeholder='yyyy-MM-dd' ng-value='control.selectedOption | date: "yyyy-MM-dd"' ng-model='control.selectedOption'  ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden' is-open='status.opened' ng-click="open($event)" show-button-bar='false' uib-datepicker-popup)
				//- input.form-control(name='{{control.id}}' id='{{control.id}}' type='text' placeholder='yyyy-MM-dd' ng-value='control.selectedOption | date: "yyyy-MM-dd"' ng-model='control.selectedOption' min='{{control.minValue || "2011-01-01"}}' max='{{control.maxValue || "2050-12-31"}}' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden' is-open='status.opened' ng-click="open($event)" show-button-bar='false' uib-datepicker-popup='yyyy-MM-dd')
			input(name='{{control.id}}' id='{{control.id}}' type='radio' data-ng-switch-when='radio' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			//- input(name='{{control.id}}' id='{{control.id}}' type='checkbox' data-ng-switch-when='checkbox' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			textarea.form-control(data-ng-switch-when='textarea' class='{{control.class}}' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			select.form-control(name='{{control.id}}' id='{{control.id}}' data-ng-if='control.mandatory === true' data-ng-switch-when='dropdown' ng-mousedown='refreshDropdown(control, $event)' ng-options="option.caption for option in (filterOptions != null ? filterOptions(control) : control.options) | orderBy:'{{control.sortBy}}'" ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-disabled='control.readOnly || !control.writeAccess' data-ng-change='handleActionClick(control, "onchange")' data-ng-hide='control.hidden')
				option(value='' selected)
					| {{control.defaultCaption}}
			select.form-control(name='{{control.id}}' id='{{control.id}}' data-ng-if='!(control.mandatory === true)' data-ng-switch-when='dropdown' ng-mousedown='refreshDropdown(control, $event)' ng-options="option.caption for option in (filterOptions != null ? filterOptions(control) : control.options) | orderBy:'{{control.sortBy}}'" ng-value='control.selectedOption' ng-model='control.selectedOption' ng-disabled='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
			hr(data-ng-switch-when='sep' style='margin:0')
			.checkbox(data-ng-switch-when='checkbox')
				input(name='{{control.id}}' id='{{control.id}}' type='checkbox' placeholder='{{control.defaultCaption}}' ng-value='control.selectedOption' ng-model='control.selectedOption' ng-required='control.mandatory' ng-readonly='control.readOnly || !control.writeAccess' data-ng-hide='control.hidden')
				em.checkbox-text {{control.text}}